var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cm;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdd,e),e}return __extends(e,t),e.prototype.onAdd=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},e.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},e}(egret.DisplayObjectContainer);t.Component=e,__reflect(e.prototype,"cm.Component");var i=function(t){function e(){var e=t.call(this)||this;return e._complete=!1,e._readyFunc=null,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdd,e),e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e}return __extends(e,t),Object.defineProperty(e.prototype,"complete",{get:function(){return this._complete},enumerable:!0,configurable:!0}),e.prototype.onReady=function(t){this._readyFunc=t},e.prototype.onComplete=function(){this._complete=!0,this.removeEventListener(eui.UIEvent.COMPLETE,this.onComplete,this),this._readyFunc&&this._readyFunc(),this._readyFunc=null},e.prototype.onAdd=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},e.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(eui.UIEvent.COMPLETE,this.onComplete,this),this._readyFunc=null},e}(eui.Component);t.EUIComponent=i,__reflect(i.prototype,"cm.EUIComponent")}(cm||(cm={}));var cm;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.layout()},e.prototype.layout=function(){(this.stage.scaleMode===egret.StageScaleMode.FIXED_WIDE||this.stage.scaleMode===egret.StageScaleMode.FIXED_HEIGHT)&&(this.left=-this.stage.stageWidth/2,this.right=this.stage.stageWidth/2,this.horizontalCenter=0)},e}(t.EUIComponent);t.AutoLayoutView=e,__reflect(e.prototype,"cm.AutoLayoutView")}(cm||(cm={}));var cm;!function(t){var e=function(){function e(t,e){this._time=0,this._text="",this._text=e,this._target=t,this._target.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)}return e.prototype.onRemove=function(){this._target.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.stopTimer()},e.prototype.cooldown=function(t){this._time=t,this._time>0&&(this.startTimer(),this.updateText())},e.prototype.startTimer=function(){this._timer||(this._timer=new t.Ticker),this._timer.start(this.tick.bind(this))},e.prototype.stopTimer=function(){this._timer&&this._timer.stop()},e.prototype.tick=function(){this._time-this._timer.timePassed;this._time>=0?this.updateText():(this.updateText(),this.stopTimer())},e.prototype.normal=function(){this._target.label=this._text,this._target.enabled=!0,this.stopTimer()},e.prototype.updateText=function(){var e=this._time-this._timer.timePassed;e>=0?(this._target.label=t.Utils.formatTime2(e),this._target.enabled=!1):(this._target.label=this._text,this._target.enabled=!0)},e}();t.CooldownButton=e,__reflect(e.prototype,"cm.CooldownButton")}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){this._factory={}}return t.prototype.getFactory=function(t,e,i,n){if(this._factory[t])return this._factory[t];var o=new dragonBones.EgretFactory;return o.parseDragonBonesData(e),o.parseTextureAtlasData(i,n),this._factory[t]=o,o},t}();t.DragonBonesManager=e,__reflect(e.prototype,"cm.DragonBonesManager"),t.dragonBonesManager=new e}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){this._listeners={}}return t.prototype.on=function(t,e,i){var n=this._listeners[t];n?this.addListener(n,{handler:e,target:i}):this._listeners[t]=[{handler:e,target:i}]},t.prototype.addListener=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(n.handler===e.handler&&n.target===e.target)return}t.push(e)},t.prototype.off=function(t,e,i){var n=this._listeners[t];if(n&&!(n.length<=0))for(var o=n.length-1,r=o;r>=0;r--){var s=n[r];s.handler===e&&s.target===i&&n.splice(r,1)}},t.prototype.dispatch=function(t){var e=this._listeners[t];if(e&&!(e.length<=0))for(var i=0;i<e.length;i++){var n=e[i];n.handler.call(n.target)}},t}();t.Dispatcher=e,__reflect(e.prototype,"cm.Dispatcher")}(cm||(cm={}));var cm;!function(t){var e=1e4,i={},n=function(){function n(t,i,n,o,r,s){void 0===o&&(o=1),void 0===r&&(r=e),this._times=1,this._xhr=null,this._url=t,this._method=i,this._data=n,this._timeout=r,this._times=o,this._options=s}return n.prototype.setHeader=function(t,e){this._header=this._header||{},this._header[t]=e},n.setHeaderForAll=function(t,e){i=i||{},i[t]=e},n.removeHeaderForAll=function(t){i&&delete i[t]},n.prototype.request=function(e){var n=this;void 0===e&&(e=!1),this._times--;var o=new XMLHttpRequest;if(this._xhr=o,o.withCredentials=!0,o.timeout=this._timeout,"GET"===this._method&&(this._url=this._url+t.Utils.serializeParam(this._data)),o.open(this._method,this._url),i||this._header){var r=Object.assign({},i,this._header);for(var s in r)o.setRequestHeader(s,r[s])}return egret.Capabilities.isMobile&&t.tokens.token&&o.setRequestHeader("Authorization",""+t.tokens.token),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),egret.Capabilities.runtimeType===egret.RuntimeType.NATIVE&&o.setRequestHeader("Cookie",t.cookies.cookie),o.ontimeout=function(){n._onReject(-1)},o.onreadystatechange=function(){if(4===o.readyState){if(n._options.responseIntercept){var t=/^\[(.*)\]$|^\{(.*)\}$/;t.test(o.response)?n._options.responseIntercept(JSON.parse(o.response)):n._options.responseIntercept(o.response)}if(200===o.status)try{var e=JSON.parse(o.response);n._onResolve(e)}catch(i){console.error("invalid json format"),n._onReject(-1)}else{var e=null;if(o.response)try{e=JSON.parse(o.response)}catch(i){return console.error("invalid json format"),void n._onReject(-1)}var r={status:o.status,res:e};204===o.status?(n._times=0,n._onReject(r)):n._onReject(r)}}},new Promise(function(t,i){e||(n._resolve=t,n._reject=i),"string"==typeof n._data?o.send(n._data):o.send(JSON.stringify(n._data))})},n.prototype._onReject=function(t){return this._xhr.onreadystatechange=null,this._xhr.ontimeout=null,this._xhr=null,this._times>0?void this.request(!0):void this._reject(t)},n.prototype._onResolve=function(t){this._reject=null,this._xhr.onreadystatechange=null,this._xhr.ontimeout=null,this._xhr=null,this._resolve(t)},n}();t.Request=n,__reflect(n.prototype,"cm.Request");var o=["GET","POST","PUT"],r=["responseIntercept"],s={get:function(t,i){var r=i.toUpperCase();if(~o.indexOf(r))return function(i,o,s,a){return void 0===s&&(s=1),void 0===a&&(a=e),new Promise(function(e,h){var c=new n(i,r,o,s,a,t.options);c.request().then(function(t){e(t)})["catch"](function(t){h(t)})})};throw new Error("There is no method named ["+i+"] in cm.service")},set:function(t,e,i,n){if(-1===r.indexOf(e))throw new Error("Can't set property named ["+e+"]!");return"options"===e?t.options=i:t.options[e]=i,!0}};t.service=new Proxy({options:{}},s)}(cm||(cm={}));var cm;!function(t){var e=function(){function e(e,i,n){void 0===n&&(n=!0),this._type="sound_type_effect",this._url="",this._playing=!1,this._stoped=!1,this._type=e,this._url=t.Utils.urlToResName(i),n&&this.playSound()}return e.prototype.playSound=function(){RES.getResAsync(this._url,this.onLoadSoundComplete,this)},e.prototype.setVolume=function(t){this._channel&&(this._channel.volume=t)},e.prototype.stop=function(){this._stoped=!0,this._playing=!1,this._channel&&(this._channel.stop(),this._channel=null),this._sound&&(this._sound=null)},e.prototype.onLoadSoundComplete=function(){if(!this._stoped){var i=t.Utils.urlToResName(this._url);this._sound=RES.getRes(i);var n=this._sound;if(this._type===e.MUSIC)t.soundManager.music_on&&(this._channel=n.play(),this._playing=!0,this._channel.volume=t.soundManager.volume);else if(this._type===e.EFFECT&&t.soundManager.sound_on){var o=n.play(0,1);this._playing=!0,o.volume=t.soundManager.volume}}},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),e.prototype.onLoadSoundError=function(t){t.currentTarget},e.MUSIC="sound_type_music",e.EFFECT="sound_type_effect",e}();__reflect(e.prototype,"Sound");var i=function(){function t(){this._music_on=!0,this._sound_on=!0,this._volume=1,this._music=null,this._volume_saved=1}return t.prototype.playMusic=function(t){this._music&&this._music.url===t&&this._music.playing||(this._music&&this._music.stop(),this._music=new e(e.MUSIC,t))},t.prototype.playSound=function(t){new e(e.EFFECT,t)},Object.defineProperty(t.prototype,"sound_on",{get:function(){return this._sound_on},set:function(t){this._sound_on=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"music_on",{get:function(){return this._music_on},set:function(t){this._music_on=t,this._music&&(t?this._music.playSound():this._music.stop())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this._music&&this._music.setVolume(t)},enumerable:!0,configurable:!0}),t.prototype.mute=function(){this._volume_saved=this._volume,this.volume=0},t.prototype.unmute=function(){this.volume=this._volume_saved},t.prototype.stopMusic=function(){this._music&&this._music.stop()},t}();t.SoundManager=i,__reflect(i.prototype,"cm.SoundManager"),t.soundManager=new i}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){this._cookies="",this._cookies=egret.localStorage.getItem("cookies")}return Object.defineProperty(t.prototype,"cookie",{get:function(){return this._cookies},set:function(t){this._cookies=t},enumerable:!0,configurable:!0}),t}();t.Cookies=e,__reflect(e.prototype,"cm.Cookies"),t.cookies=new e}(cm||(cm={}));var cm;!function(t){var e=function(){function t(t){this._token="",this._token=egret.localStorage.getItem("_token")}return Object.defineProperty(t.prototype,"token",{get:function(){return this._token},set:function(t){this._token=t,egret.localStorage.setItem("_token",t)},enumerable:!0,configurable:!0}),t}();t.Token=e,__reflect(e.prototype,"cm.Token"),t.tokens=new e("")}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){this._lastTick=0,this._time=0}return t.prototype.start=function(){this._lastTick=egret.getTimer(),this._time=0,egret.startTick(this._tick,this)},t.prototype._tick=function(t){var e=t-this._lastTick;return e=e>100?100:e,this._time+=e,this._lastTick=t,!1},Object.defineProperty(t.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),t.prototype.stop=function(){egret.stopTick(this._tick,this)},t}();t.Clock=e,__reflect(e.prototype,"cm.Clock")}(cm||(cm={}));var cm;!function(t){var e=function(){function t(t,e,i,n,o){void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=!0),this._target=null,this._callback=null,this._interval=0,this._repeat=0,this._timepassed=0,this._times=0,this._canPause=!0,this._target=t,this._callback=e,this._interval=i,this._repeat=n,this._canPause=o}return t.prototype.reset=function(t,e){this._interval=t,this._repeat=e,this._times=0,this._timepassed=0},t.prototype.match=function(t,e){return this._target===t&&this._callback===e},t.prototype.update=function(t){return this._canPause&&(t=t>100?100:t),this._timepassed+=t,this._timepassed>=this._interval&&(this._times++,this._timepassed=0,this._callback.call(this._target)),0!==this._repeat&&this._times>=this._repeat?!1:!0},t}();__reflect(e.prototype,"Scheduler");var i=function(){function t(){this._schedulers=[],this._timeStamp=0,this._ticking=!1}return t.prototype._tick=function(t){var e=t-this._timeStamp;this._timeStamp=t;for(var i=this._schedulers.length,n=i-1;n>=0;n--){var o=this._schedulers[n];if(o){var r=o.update(e);r||this._schedulers.splice(n,1)}}return 0===this._schedulers.length&&this.stopTick(),!1},t.prototype.startTick=function(){this._ticking||(egret.startTick(this._tick,this),this._timeStamp=egret.getTimer(),this._ticking=!0)},t.prototype.stopTick=function(){this._ticking&&(egret.stopTick(this._tick,this),this._ticking=!1)},t.prototype.schedule=function(t,i,n,o,r){void 0===o&&(o=0),void 0===r&&(r=!0);var s=this._getIndexOfScheduler(t,i);if(s>=0){var a=this._schedulers[s];a.reset(n,o)}else this._schedulers.push(new e(t,i,n,o,r));this._schedulers.length>0&&this.startTick()},t.prototype.unschedule=function(t,e){var i=this._getIndexOfScheduler(t,e);i>=0&&this._schedulers.splice(i,1)},t.prototype._getIndexOfScheduler=function(t,e){for(var i=0;i<this._schedulers.length;i++){var n=this._schedulers[i];if(n.match(t,e))return i}return-1},t}();t.ScheduleManager=i,__reflect(i.prototype,"cm.ScheduleManager"),t.scheduler=new i}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){this._timer=null,this._callback=null,this._startTime=0,this._timePassed=0}return t.prototype.start=function(t){this.stop(),this._startTime=egret.getTimer(),this._timer||(this._timer=new egret.Timer(1e3)),this._callback=t,this._timer.addEventListener(egret.TimerEvent.TIMER,this._onTick,this),this._timer.start()},t.prototype.stop=function(){this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this._onTick,this)),this._callback=null},Object.defineProperty(t.prototype,"timePassed",{get:function(){return this._timePassed},enumerable:!0,configurable:!0}),t.prototype._onTick=function(){this._timePassed=Math.floor((egret.getTimer()-this._startTime)/1e3),this._callback&&this._callback()},t}();t.Ticker=e,__reflect(e.prototype,"cm.Ticker")}(cm||(cm={}));var cm;!function(t){var e={bg:!1,clickBgClose:!1,closeOnViewTapped:!1,addToMain:!0},i=function(i){function n(o,r){var s=i.call(this)||this;s._hasBg=!0,s._clickBgClose=!0,s._showComplete=!1,s._closeOnViewTapped=!1,s._opt=null,r=Object.assign({},e,r),s._opt=r,s._hasBg=r.bg,s._clickBgClose=r.clickBgClose,s._closeOnViewTapped=r.closeOnViewTapped;var a=t.main.stage.stageWidth,h=t.main.stage.stageHeight;s.width=a,s.height=h,s._content=o,o instanceof eui.Component?(o.horizontalCenter=0,o.verticalCenter=0):(o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,o.x=a/2,o.y=h/2),s._hasBg&&s.createBg(),s.addChild(o);var c=void 0!==s._opt.sound?s._opt.sound:n.DEFAULT_SOUND;return c&&t.soundManager.playSound(c),s.addEventListener(egret.Event.RESIZE,s.onResize,s),s}return __extends(n,i),n.show=function(t,e){var i=new n(t,e);return i.show(),i},n.prototype.onResize=function(){if(this._bg){var e=t.main.stage.stageWidth,i=t.main.stage.stageHeight;this._bg.graphics.clear(),this._bg.graphics.beginFill(0,1),this._bg.graphics.drawRect(0,0,e,i),this._bg.graphics.endFill(),this._bg.width=e,this._bg.height=i}},n.prototype.createBg=function(){var e=t.main.stage.stageWidth,i=t.main.stage.stageHeight;this._bg=new egret.Sprite,this._bg.touchEnabled=!0,this._bg.graphics.beginFill(0,1),this._bg.graphics.drawRect(0,0,e,i),this._bg.graphics.endFill(),this._bg.width=e,this._bg.height=i,this.addChild(this._bg)},n.prototype.onBgTap=function(){this._clickBgClose&&this.hide()},n.prototype.hide=function(){var t=this;egret.Tween.removeTweens(this._content);var e=egret.Tween.get(this._content);if(e.to({scaleX:0,scaleY:0,alpha:0},200,egret.Ease.backOut).call(function(){t.stage&&t.parent.removeChild(t)}),this._bg){egret.Tween.removeTweens(this._bg);var i=egret.Tween.get(this._bg);this._bg.alpha=.3,i.to({alpha:0},200)}},n.prototype.show=function(){this._opt.addToMain?t.main.addChild(this):t.sceneManager.currentScene.addChild(this),this._content.scaleX=this._content.scaleX=0,this._content.alpha=0,egret.Tween.removeTweens(this._content);var e=egret.Tween.get(this._content);if(e.to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.backOut).call(this.onShowComplete,this),this._bg){var i=this._opt.alpha||.3;this._bg.alpha=0,egret.Tween.removeTweens(this._bg);var n=egret.Tween.get(this._bg);n.to({alpha:i},300)}},n.prototype.onShowComplete=function(){this._showComplete=!0;var t=this._content.onShowComplete;t&&t.call(this._content)},Object.defineProperty(n.prototype,"showComplete",{get:function(){return this._showComplete},enumerable:!0,configurable:!0}),n.prototype.onAdd=function(){i.prototype.onAdd.call(this),this._bg&&this._hasBg&&this._bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBgTap,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onViewTap,this)},n.prototype.onRemove=function(){i.prototype.onRemove.call(this),this._bg&&this._hasBg&&this._bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBgTap,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onViewTap,this),egret.Tween.removeTweens(this._content),this._bg=null,this._content=null},n.prototype.onViewTap=function(t){this._closeOnViewTapped?this.hide():t.stopPropagation()},n}(t.AutoLayoutView);t.Alert=i,__reflect(i.prototype,"cm.Alert")}(cm||(cm={}));var cm;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._data=null,i._data=t,i.skinName="ConfirmDialog",i}return __extends(i,e),i.show=function(e,n){var o=new i(e);return t.Alert.show(o,n)},i.prototype.onComplete=function(){e.prototype.onComplete.call(this),this.top=this.right=this.bottom=this.left=0,this.content.text=this._data.content,this.currentState=this._data.cancel?"hasCancel":"noCancel",this._data.ok&&(this.okBtn.label=this._data.ok.text,this.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOK,this)),this._data.cancel&&(this.cancelBtn.label=this._data.cancel.text,this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancel,this))},i.prototype.onOK=function(){this.playButtonSound(),this.hide(),this._data.ok.callback&&this._data.ok.callback()},i.prototype.onCancel=function(){this.playButtonSound(),this.hide(),this._data.cancel.callback&&this._data.cancel.callback()},i.prototype.playButtonSound=function(){var e=void 0!==this._data.sound?this._data.sound:i.DEFAULT_SOUND;e&&t.soundManager.playSound(e)},i.prototype.hide=function(){var t=this.parent;console.log(t),t.hide()},i}(t.EUIComponent);t.ConfirmDialog=e,__reflect(e.prototype,"cm.ConfirmDialog")}(cm||(cm={}));var cm;!function(t){var e=function(t){function e(e,i,n,o){var r=t.call(this)||this;r._imgArr=[],r._time=0,r._playing=!1,r._startTime=0,r._index=0,r._playTimes=0,r._repeat=0;for(var s=n;o>=s;s++){for(var a=s.toString();a.length<i;)a="0"+a;r._imgArr.push(e+a)}r.addEventListener(egret.Event.ADDED_TO_STAGE,r.onAddToStage,r);var h=RES.getRes(r._imgArr[0]);return r.width=h.textureWidth,r.height=h.textureHeight,r}return __extends(e,t),e.prototype.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this._time=t,this._playing=!0,this._startTime=egret.getTimer(),this._index=0,this._playTimes=1,this._repeat=e,this.addEventListener(egret.Event.ENTER_FRAME,this.update,this)},e.prototype._play=function(){this._playing=!0,this._startTime=egret.getTimer(),this._index=0},e.prototype.onAddToStage=function(t){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},e.prototype.onRemove=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},e.prototype.complete=function(){0===this._repeat?this._play():this._repeat>0&&(this._playTimes>=this._repeat?(this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))):(this._playTimes++,this._play()))},e.prototype.update=function(){if(this._playing){var t=void 0;if(this._time>0){var e=egret.getTimer(),i=e-this._startTime;if(i>this._time)return void this.complete();var n=i/this._time;n=n>1?1:n,this._index=Math.round(n*(this._imgArr.length-1)),t=RES.getRes(this._imgArr[this._index]),this.source=t}else{if(this._index>this._imgArr.length-1)return void this.complete();t=RES.getRes(this._imgArr[this._index]),this.source=t,this._index++}this.width=t.textureWidth,this.height=t.textureHeight,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2}},e}(eui.Image);t.SequenceImage=e,__reflect(e.prototype,"cm.SequenceImage")}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){this._prevX=0,this._prevY=0,this._isDraging=!1}return t.prototype.enableDrag=function(t,e){this._target=t,this._parent=t.parent,this._parent.touchEnabled=!0,this._rect=e,this._prevX=0,this._prevY=0,this._parent.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this._parent.addEventListener(egret.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._parent.addEventListener(egret.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._parent.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this._onTouchEnd,this)},t.prototype.disableDrag=function(){this._isDraging=!1,this._parent&&(this._parent.touchEnabled=!1,this._parent.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this._parent.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._parent.removeEventListener(egret.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._parent.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this._onTouchEnd,this))},t.prototype.updateRect=function(t){this._rect=t},t.prototype.stop=function(){this._onTouchEnd()},Object.defineProperty(t.prototype,"isDraging",{get:function(){return this._isDraging},enumerable:!0,configurable:!0}),t.prototype._onTouchBegin=function(t){this._prevX=t.stageX,this._prevY=t.stageY,this._isDraging=!0},t.prototype._onTouchMove=function(t){if(this._isDraging){var e=t.stageX-this._prevX,i=t.stageY-this._prevY;this._prevX=t.stageX,this._prevY=t.stageY;var n=this._target.x,o=this._target.y;this._rect.width<this._target.width&&(n+e>this._rect.x?n=this._rect.x:n+e<this._rect.width-this._target.width?n=this._rect.width-this._target.width:n+=e),this._rect.height<this._target.height&&(o+i>this._rect.y?o=this._rect.y:o+i<this._rect.height-this._target.height?o=this._rect.height-this._target.height:o+=i),this._target.x=n,this._target.y=o}},t.prototype._onTouchEnd=function(){this._isDraging=!1},t}();t.Dragable=e,__reflect(e.prototype,"cm.Dragable")}(cm||(cm={}));var ForumPage=function(t){function e(){var e=t.call(this)||this;return e.skinName="ForumPageSkin",e}return __extends(e,t),e.prototype.onComplete=function(){t.prototype.onComplete.call(this)},e}(cm.AutoLayoutView);__reflect(ForumPage.prototype,"ForumPage",["eui.UIComponent","egret.DisplayObject"]);var cm;!function(t){var e=function(t){function e(e,i,n,o,r,s,a){var h=t.call(this)||this;return h._step=50,h._miniHeight=35,h._prevX=0,h._prevY=0,h.up=n,h.down=o,h.bar=r,h.barArea=s,h._scroller=e,h._container=i,a&&(void 0!==a.minHeight&&(h._miniHeight=a.minHeight),void 0!==a.step&&(h._step=a.step)),h}return __extends(e,t),e.prototype.enable=function(){egret.log("init scrollbar"),this.validateNow(),this.up&&this.up.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpTap,this),this.down&&this.down.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ondownTap,this),this.bar&&this.bar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBarBegin,this),this.bar&&this.bar.addEventListener(egret.TouchEvent.TOUCH_END,this.onBarEnd,this),this.bar&&this.bar.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onBarCancel,this),this.bar&&this.bar.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onBarReleaseOutside,this),this.bar&&this._container.addEventListener(eui.UIEvent.RESIZE,this.onResize,this),this.bar&&this._scroller.addEventListener(egret.Event.CHANGE,this.onScroll,this),this.resizeBar(),this.bar.top=0},e.prototype.disable=function(){t.prototype.onRemove.call(this),this.up&&this.up.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpTap,this),this.down&&this.down.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ondownTap,this),this.bar&&this.bar.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBarBegin,this),this.bar&&this.bar.removeEventListener(egret.TouchEvent.TOUCH_END,this.onBarEnd,this),this.bar&&this.bar.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onBarMove,this),this.bar&&this.bar.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onBarCancel,this),this.bar&&this.bar.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onBarReleaseOutside,this),this._container&&this._container.removeEventListener(eui.UIEvent.RESIZE,this.onResize,this),this._scroller&&this._scroller.removeEventListener(egret.Event.CHANGE,this.onScroll,this)},e.prototype.onScroll=function(t){egret.log("on scroll"),this.updateScrollBar()},e.prototype.onResize=function(t){egret.log("on resize"),this.resizeBar(),this.move(0)},e.prototype.resizeBar=function(){if(this._scroller&&this.bar&&this.barArea){this._scroller.viewport.validateNow();var t=this._scroller.height/this._scroller.viewport.measuredHeight*this.barArea.height;t<this._miniHeight&&(t=this._miniHeight),t>this.barArea.height&&(t=this.barArea.height),this.bar.height=t}},e.prototype.onUpTap=function(){this.move(-this._step)},e.prototype.ondownTap=function(){this.move(this._step)},e.prototype.onBarBegin=function(t){this.bar.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onBarMove,this),this._prevX=t.stageX,this._prevY=t.stageY},e.prototype.onBarEnd=function(){this.bar.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onBarMove,this)},e.prototype.onBarMove=function(t){var e=t.stageY-this._prevY;this.move(e),this._prevX=t.stageX,this._prevY=t.stageY},e.prototype.move=function(t){egret.log("move:"+t);var e=this.bar.top+t;0>e?this.bar.top=0:e>this.barArea.height-this.bar.height?this.bar.top=this.barArea.height-this.bar.height:this.bar.top=e,this.updateScroll()},e.prototype.updateScroll=function(){var t=this.bar.top/(this.barArea.height-this.bar.height);this._scroller.viewport.scrollV=t*(this._scroller.viewport.contentHeight-this._scroller.height)},e.prototype.updateScrollBar=function(){var t=this._scroller.viewport.scrollV/(this._scroller.viewport.contentHeight-this._scroller.height);0>t&&(t=0),t>1&&(t=1);var e=t*(this.barArea.height-this.bar.height);this.bar.top=e},e.prototype.onBarCancel=function(){this.bar.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onBarMove,this)},e.prototype.onBarReleaseOutside=function(){this.bar.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onBarMove,this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(t.EUIComponent);t.ScrollBar=e,__reflect(e.prototype,"cm.ScrollBar",["eui.UIComponent","egret.DisplayObject"])}(cm||(cm={}));var cm;!function(t){var e={placeHolder:"",placeHolderColor:9859143,errorColor:13390940,textColor:9859143,maxChar:10},i=function(){function t(t,i){void 0===i&&(i=e),this._clearWhenFocusIn=!0,this._option=Object.assign({},e,i),this._target=t,this._target.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this._target.addEventListener(egret.TextEvent.FOCUS_IN,this.focusIn,this),this._target.addEventListener(egret.TextEvent.FOCUS_OUT,this.focusOut,this),this._target.addEventListener(egret.TextEvent.CHANGE,this.onchange,this),this.setHolderplace()}return t.prototype.onchange=function(t){var e=this._target.text;e.length>this._option.maxChar&&(e=e.substr(0,this._option.maxChar),this._target.text=e)},t.prototype.focusIn=function(){this._clearWhenFocusIn&&(this._target.text="",this._target.textColor=this._option.textColor,this._clearWhenFocusIn=!1)},t.prototype.setHolderplace=function(){this._target.text=this._option.placeHolder,this._target.textColor=this._option.placeHolderColor,this._clearWhenFocusIn=!0},Object.defineProperty(t.prototype,"clearWhenFocusIn",{get:function(){return this._clearWhenFocusIn},enumerable:!0,configurable:!0}),t.prototype.focusOut=function(){var t=this._target.text;""===t.trim()&&this.setHolderplace()},t.prototype.onRemove=function(){this._target.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this._target.removeEventListener(egret.TextEvent.FOCUS_IN,this.focusIn,this),this._target.removeEventListener(egret.TextEvent.FOCUS_OUT,this.focusOut,this),this._target.removeEventListener(egret.TextEvent.CHANGE,this.onchange,this)},t.prototype.error=function(t){this._target.textColor=this._option.errorColor,this._target.text=t,this._clearWhenFocusIn=!0},t}();t.TextInput=i,__reflect(i.prototype,"cm.TextInput")}(cm||(cm={}));var cm;!function(t){var e=16777215,i=4,n=0,o=16,r=function(r){function s(){var t=r.call(this)||this;return t._bg=new egret.Sprite,t.addChild(t._bg),t._txt=new eui.Label,t._txt.size=o,t._txt.textColor=n,t._txt.textAlign=egret.HorizontalAlign.CENTER,t._txt.verticalAlign=egret.VerticalAlign.MIDDLE,t.addChild(t._txt),t}return __extends(s,r),s.show=function(e,i,n,o,r){s.instance||(s.instance=new s),s.instance.text=e,s.instance.anchorOffsetX=o*s.instance.width,s.instance.anchorOffsetY=r*s.instance.height,s.instance.x=i,s.instance.y=n,t.main.stage.addChild(s.instance)},s.hide=function(){s.instance&&s.instance.parent&&s.instance.parent.removeChild(s.instance)},Object.defineProperty(s.prototype,"text",{set:function(t){this._txt.text=t,this._txt.validateSize(),this._txt.validateDisplayList();var n=this._txt.textWidth+12,o=this._txt.textHeight+6,r=this._bg.graphics;r.clear(),r.beginFill(e),r.drawRoundRect(0,0,n,o,i,i),r.endFill(),this._txt.x=6,this._txt.y=3},enumerable:!0,configurable:!0}),s}(eui.Component);t.Tip=r,__reflect(r.prototype,"cm.Tip");var s=function(){function e(){this._tip=null,this._tip=new r,this._map=new Map}return e.prototype.mouseEnabled=function(){return"web"===egret.Capabilities.runtimeType&&!egret.Capabilities.isMobile},e.prototype.updateTip=function(t,e){this._map.set(t,e)},e.prototype.enable=function(t,e){this.mouseEnabled()&&(this._map.set(t,e),t.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),t.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this))},e.prototype.disable=function(t){this.mouseEnabled()&&(this._map["delete"](t),t.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseOver,this),t.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseOut,this))},e.prototype.onMouseOver=function(e){egret.log("mouse over"),this._tip.text=this._map.get(e.currentTarget),t.main.addChildAt(this._tip,t.Layer.TOP),this.mouseEnabled&&t.main.stage.addEventListener(mouse.MouseEvent.MOUSE_MOVE,this.onMouseMove,this),this.updatePos(e)},e.prototype.onMouseMove=function(t){egret.log("mouse move"),this.updatePos(t)},e.prototype.onMouseOut=function(e){egret.log("mouse out"),this._tip.parent&&this._tip.parent.removeChild(this._tip),this.mouseEnabled&&t.main.stage.removeEventListener(mouse.MouseEvent.MOUSE_MOVE,this.onMouseMove,this)},e.prototype.updatePos=function(e){this._tip.stage&&(e.stageX>t.main.stage.stageWidth-this._tip.width?this._tip.x=t.main.stage.stageWidth-this._tip.width:this._tip.x=e.stageX,this._tip.y=e.stageY+12)},e}();t.TipManager=s,__reflect(s.prototype,"cm.TipManager"),t.tips=new s}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){this._objs={}}return t.prototype.put=function(t,e){this._objs[t]||(this._objs[t]=[]),e.cache(),this._objs[t].length>100&&console.warn('"'+t+'" object cached over 50'),this._objs[t].push(e)},t.prototype.get=function(t){var e=t.prototype.__class__,i=this._objs[e];if(i&&i.length>0){var n=i.pop();return n.reuse(),n}return t?new t:null},t}();t.CachePool=e,__reflect(e.prototype,"cm.CachePool"),t.cachePool=new e}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){}return t.getDragonBonesRes=function(t){var e=[];return t.forEach(function(t){e.push.apply(e,[t+"_ske_json",t+"_tex_json",t+"_tex_png"])}),e},t.roll=function(t){var e=t.length;return t[Math.floor(Math.random()*e)]},t.getQueryParam=function(t){var e=window.location.search.match(new RegExp("(\\?|&)"+t+"(\\[\\])?=([^&]*)"));
return e?e[3]:!1},t.serializeParam=function(t){var e="";for(var i in t){var n=t[i];void 0!==n&&null!==n&&(e+=(""===e?"?":"&")+i+"="+n)}return e},t.formatTime=function(t){var e="",i=86400,n=t>i?Math.floor(t/i):0;t%=i;var o=3600,r=t>o?Math.floor(t/o):0;t%=o;var s=t>60?Math.floor(t/60):0;return t%=60,n>0&&(e+=n+"天 "),e+=10>r?"0"+r:r,e+=":",e+=10>s?"0"+s:s,e+=":",e+=10>t?"0"+t:t},t.formatTime2=function(t){var e="",i=t>60?Math.floor(t/60):0;return t%=60,e=10>i?"0"+i:i+"",e+=":",e+=10>t?"0"+t:t},t.sortOrder=function(t,e){e.sort(function(t,e){return t.y>e.y?1:t.y<e.y?-1:0});var i=e.map(function(e){return t.getChildIndex(e)});i.sort(),e.forEach(function(e,n){t.setChildIndex(e,i[n])})},t.setAnchor=function(t,e,i){t.anchorOffsetX=t.width*e,t.anchorOffsetY=t.height*i},t.delay=function(t,e){var i=new egret.Timer(t,1),n=function(){i.removeEventListener(egret.TimerEvent.TIMER,n,this),e()};i.addEventListener(egret.TimerEvent.TIMER,n,this),i.start()},t.fitScale=function(t,e,i,n,o){if(void 0===o&&(o=!1),t>=i&&e>=n&&!o)return 1;var r=t/i,s=e/n;return s>r?r:s},t.stringEllipsis=function(t,e){return t.length>e?(t=t.substr(0,e),t+="."):t},t.IsPC=function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0,n=0;n<e.length;n++)if(t.indexOf(e[n])>0){i=!1;break}return i},t.urlToResName=function(t){var e=t.lastIndexOf("/");return-1!==e&&(t=t.substring(e+1)),t.replace(".","_")},t.mathAngleToRotation=function(t,e){var i=180*Math.atan2(t,e)/Math.PI;if(180>=i&&i>90)return 450-i;if(i>-180&&90>=i)return 90-i;throw new Error("error angle range!")},t.addHistoryState=function(t){void 0===t&&(t=location.origin+"/tower"),egret.log("addUrl");var e=location.href;history.pushState({},"",location.origin+"/tower"),history.pushState({},"",e),window.addEventListener("popstate",function(e){history.state&&(egret.log("test"),location.href=t)})},t.loadScript=function(e,i){var n=0,o=function(){t.loadSingleScript(e[n],function(){n++,n>=e.length?i():o()})};o()},t.loadSingleScript=function(t,e){var i=document.createElement("script");i.async=!1,i.src=t,i.addEventListener("load",function(){i.parentNode.removeChild(i),i.removeEventListener("load",arguments.callee,!1),e()},!1),document.body.appendChild(i)},t}();t.Utils=e,__reflect(e.prototype,"cm.Utils")}(cm||(cm={}));var cnUtils;!function(t){function e(t,e,i){t?t.addEventListener(egret.TouchEvent.TOUCH_TAP,e,i):egret.error("target is null!")}function i(t,e,i){t?t.addEventListener(eui.ItemTapEvent.ITEM_TAP,e,i):egret.error("target is null!")}function n(t,e,i){t?t.once(egret.TouchEvent.TOUCH_TAP,e,i):egret.error("target is null!")}function o(){eui.Label.default_fontFamily="SimHei",egret.TextField.default_fontFamily="SimHei";var e=window.tiled;e&&(e.getRes=function(e,i,n,o){var r=e.lastIndexOf("/"),s=e.slice(r+1);s=s.replace(".","_"),e=t.getRESUrlByKey(s),RES.getResByUrl(e,i,n,o),egret.log(e)})}function r(t,e){var i=egret.localStorage.getItem(t)||e;return i&&(i=JSON.parse(i)),i}function s(t,e){var i=JSON.stringify(e);egret.localStorage.setItem(t,i)}function a(){g={};for(var t=window.location.search.substr(1),e=t.split("&"),i=0,n=e.length;n>i;i++){var o=e[i],r=o.split("="),s=r[0],a=r[1];g[s]=a}}function h(t){return null==g&&a(),g[t]}function c(){return egret.Capabilities.isMobile||h("isMobile")}function u(){return egret.Capabilities.isMobile&&window.cordova}function p(t){var e=RES.configInstance.keyMap;return e[t]?e[t].url:t}function _(t,e){return t.length<=e?t[t.length-1]:t[e]}function l(t,e,i){for(var n=t+"";n.length<e;)n=i+n;return n}t.touchTap=e,t.onItemTap=i,t.onceTouchTap=n,t.hackEngine=o,t.getLocalStorage=r,t.setLocalStorage=s;var g;t.anyaQueryParam=a,t.getQuery=h,t.IS_Mobile=c,t.IS_SDK=u,t.getRESUrlByKey=p,t.safeGetElement=_,t.toFixNum=l}(cnUtils||(cnUtils={}));var cm;!function(t){function e(e){t.main=e}t.main=null,t.init=e}(cm||(cm={}));var cm;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i._skinName="",i._args=null,i._args=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),egret.log("scene children created")},e.prototype.loadRes=function(t,e,i){var n=this;void 0===e&&(e=[]),void 0===i&&(i=[]),this.loadDynamicImage(i).then(function(){n.loadResInConfig(t,e)})},e.prototype.loadResInConfig=function(t,e){var i=RES.getGroupByName(t).map(function(t){return t.name}),n="dynamic_group",o=i.concat(e);RES.createGroup(n,o,!0),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadErr,this),RES.loadGroup(n)},e.prototype.loadDynamicImage=function(t){return Promise.all(t.map(function(t){return new Promise(function(e,i){RES.getResByUrl(t,e,null,RES.ResourceItem.TYPE_IMAGE)})}))},e.prototype.onLoaded=function(){},e.prototype.onRemove=function(){t.prototype.onRemove.call(this),this.removeEventListener(eui.UIEvent.COMPLETE,this.onSkinComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadErr,this)},e.prototype.onResourceLoadComplete=function(t){"dynamic_group"===t.groupName&&(egret.log("load scene resource compelte"),this._skinName?this.applySkin(this._skinName):this.onLoaded())},e.prototype.onResourceProgress=function(t){"dynamic_group"===t.groupName&&this.onProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.onProgress=function(t,e){},e.prototype.onResourceLoadErr=function(t){egret.log("load scene resource error")},e.prototype.applySkin=function(t){egret.log("set scene skin"),this.addEventListener(eui.UIEvent.COMPLETE,this.onSkinComplete,this),this.skinName=t},e.prototype.onSkinComplete=function(){egret.log("load scene skin compelte"),this.removeEventListener(eui.UIEvent.COMPLETE,this.onSkinComplete,this),this.onLoaded()},e.prototype.exit=function(){return Promise.resolve()},e}(t.AutoLayoutView);t.BaseScene=e,__reflect(e.prototype,"cm.BaseScene")}(cm||(cm={}));var cm;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._username="",t.anchorX=.5,t.anchorY=1,t}return __extends(i,e),i.prototype.init=function(t,e,i){void 0===e&&(e=.5),void 0===i&&(i=1),this.anchorX=e,this.anchorY=i,this._name=t,this.loadRes()},Object.defineProperty(i.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),i.prototype.loadRes=function(){var e=t.Utils.urlToResName(this._name),i="animation_"+e;RES.createGroup(i,[e+"_ske_json",e+"_tex_json",e+"_tex_png"],!0),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this._onDragonbonesComplete,this),RES.loadGroup(i)},i.prototype._onDragonbonesComplete=function(t){t.groupName==="animation_"+this._name&&(this.createAnimation(),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this._onDragonbonesComplete,this))},i.prototype.createAnimation=function(){var e=RES.getRes(this._name+"_ske_json"),i=RES.getRes(this._name+"_tex_json"),n=RES.getRes(this._name+"_tex_png"),o=t.dragonBonesManager.getFactory(name,e,i,n),r=o.buildArmatureDisplay("armatureName");this._armature=r,this.addChild(this._armature);var s=this._armature.width,a=this._armature.height;this.anchorOffsetX=s*this.anchorX,this.anchorOffsetY=a*this.anchorY,this.width=s,this.height=a,this._armature.x=s/2,this._armature.y=a,this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))},i.prototype.play=function(t,e){if(this._armature){var i=this._armature,n=i.animation.getState(t);n&&n.isPlaying&&i.animation.stop(),i.animation.play(t,e)}},i.prototype.stop=function(){if(this._armature){var t=this._armature;t.animation.stop()}},i.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.stop()},i}(t.EUIComponent);t.Animation=e,__reflect(e.prototype,"cm.Animation")}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){}return t.getByUrl=function(t){return new Promise(function(e,i){var n=new egret.ImageLoader;n.crossOrigin="anonymous",n.addEventListener(egret.Event.COMPLETE,function(){var t=new egret.Texture;t.bitmapData=n.data,e(t)},null),n.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){i(t)},null),n.load(t)})},t}();t.Image=e,__reflect(e.prototype,"cm.Image")}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){}return t.SCENE=0,t.Middle=1,t.TOP=2,t}();t.Layer=e,__reflect(e.prototype,"cm.Layer")}(cm||(cm={}));var cm;!function(t){var e=function(){function e(){}return e.prototype.load=function(e,i){for(var n=this,o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];this._currentScene&&this._currentScene.stage?this._currentScene.exit().then(function(){n._currentScene.parent.removeChild(n._currentScene),n._currentScene=new e(o),n._currentScene.onReady(i),t.main.addChildAt(n._currentScene,t.Layer.SCENE)}):(this._currentScene=new e(o),t.main.addChildAt(this._currentScene,t.Layer.SCENE))},Object.defineProperty(e.prototype,"currentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),e}();t.SceneManager=e,__reflect(e.prototype,"cm.SceneManager"),t.sceneManager=new e}(cm||(cm={}));var cm;!function(t){var e=function(){function t(){}return t.getLinePoints=function(t,e,i,n){for(var o=[],r=Math.abs(i-t),s=Math.abs(n-e),a=i>t?1:-1,h=n>e?1:-1,c=r-s;;){if(o.push({x:t,y:e}),t==i&&e==n)break;var u=2*c;u>-s&&(c-=s,t+=a),r>u&&(c+=r,e+=h)}return o},t}();t.Algorithm=e,__reflect(e.prototype,"cm.Algorithm")}(cm||(cm={}));